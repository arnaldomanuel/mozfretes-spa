(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"0dce":function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("q-card",{staticClass:"my-card"},[o("q-card-section",[o("div",{staticClass:"text-h5"},[e._v("Gestão de viajens")]),o("div",{staticClass:"text-subtitle2"},[e._v("Se possui algum camião vago, registe-o aqui junto do percurso que vai seguir")])]),o("q-card-section",{staticClass:"q-pt-none"},[[o("div",{},[o("q-btn",{staticClass:"q-mr-lg",attrs:{to:"/viagem/criar",color:"secondary",label:"Criar",icon:"add"}}),o("q-btn",{staticClass:"q-mr-lg",attrs:{to:"/viagem",color:"secondary",label:"Listar",icon:"visibility"}}),o("q-btn",{staticClass:"q-mr-lg",attrs:{to:"/viagem?news=novo",color:"secondary",label:"Listar novos",icon:"visibility"}})],1)]],2)],1)],1)},r=[],i={},s=i,n=o("2877"),l=o("f09f"),c=o("a370"),u=o("9c40"),d=o("eebe"),p=o.n(d),m=Object(n["a"])(s,a,r,!1,null,null,null);t["a"]=m.exports;p()(m,"components",{QCard:l["a"],QCardSection:c["a"],QBtn:u["a"]})},"3a5e":function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div")},r=[],i=o("2a19");let s=null,n=null;var l={openNotify(){s=i["a"].create({color:"primary",spinner:!0,message:"Por favor aguarde...",timeout:0})},openSuccess(e){n=i["a"].create({color:"green",spinner:!1,message:e,timeout:3e3})},closeNotify(){s()},closeSuccess(){n()}},c=l,u=o("2877"),d=Object(u["a"])(c,a,r,!1,null,null,null);t["a"]=d.exports},"3fb9":function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div")},r=[],i=o("2a19");let s=null;var n={openNotify(e,t=0){s=i["a"].create({type:"negative",message:e,timeout:t})},closeNotify(){s()}},l=n,c=o("2877"),u=Object(c["a"])(l,a,r,!1,null,null,null);t["a"]=u.exports},74182:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("header-freight-journey"),o("q-card",{staticClass:"my-card q-mt-md"},[o("q-card-section",[o("div",{staticClass:"text-h6"},[e._v("Adicionar viajem")])]),o("q-card-section",{staticClass:"q-pt-none"},[o("q-form",{staticClass:"q-gutter-md",on:{submit:e.onSubmit}},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-lg-6"},[o("q-input",{staticClass:"q-mr-lg",attrs:{filled:"",label:"Ponto de partida",hint:"Seja específico e evite erros ortográficos","lazy-rules":"",rules:[function(e){return e&&e.length>0||"Campo obrigatório"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"add_location"}})]},proxy:!0}]),model:{value:e.freight_journey.from_location,callback:function(t){e.$set(e.freight_journey,"from_location",t)},expression:"freight_journey.from_location"}})],1),o("div",{staticClass:"col-12 col-lg-6"},[o("q-input",{staticClass:"q-mr-lg",attrs:{filled:"",label:"Local de destino","lazy-rules":"",rules:[function(e){return null!==e&&""!==e||"Campo obrigatório"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"add_location"}})]},proxy:!0}]),model:{value:e.freight_journey.to_location,callback:function(t){e.$set(e.freight_journey,"to_location",t)},expression:"freight_journey.to_location"}})],1),o("div",{staticClass:"col-12 col-lg-6 q-mt-md"},[o("q-input",{staticClass:"q-mr-lg",attrs:{hint:"Clique no ícone de calendário e depois no relógio",label:"Data de partida",readonly:"",filled:""},on:{click:function(t){e.showDateTutorial=!0}},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{color:"primary",name:"event"}},[o("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[o("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm"},model:{value:e.freight_journey.from_date,callback:function(t){e.$set(e.freight_journey,"from_date",t)},expression:"freight_journey.from_date"}},[o("div",{staticClass:"row items-center justify-end"},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Fechar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{color:"primary",name:"access_time"}},[o("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[o("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:""},model:{value:e.freight_journey.from_date,callback:function(t){e.$set(e.freight_journey,"from_date",t)},expression:"freight_journey.from_date"}},[o("div",{staticClass:"row items-center justify-end"},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Fechar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.freight_journey.from_date,callback:function(t){e.$set(e.freight_journey,"from_date",t)},expression:"freight_journey.from_date"}})],1),o("div",{staticClass:"col-12 col-lg-6 q-mt-md"},[o("q-input",{staticClass:"q-mr-lg",attrs:{hint:"Clique no ícone de calendário e depois no relógio",label:"Data de destino",readonly:"",filled:""},on:{click:function(t){e.showDateTutorial=!0}},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{color:"primary",name:"event"}},[o("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[o("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm"},model:{value:e.freight_journey.to_date,callback:function(t){e.$set(e.freight_journey,"to_date",t)},expression:"freight_journey.to_date"}},[o("div",{staticClass:"row items-center justify-end"},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Fechar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{color:"primary",name:"access_time"}},[o("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[o("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:""},model:{value:e.freight_journey.to_date,callback:function(t){e.$set(e.freight_journey,"to_date",t)},expression:"freight_journey.to_date"}},[o("div",{staticClass:"row items-center justify-end"},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Fechar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.freight_journey.to_date,callback:function(t){e.$set(e.freight_journey,"to_date",t)},expression:"freight_journey.to_date"}})],1),e.editPage?e._e():o("div",{staticClass:"col-12 col-lg-6 q-mt-md"},[o("q-select",{staticClass:"q-mr-md",attrs:{filled:"","use-input":"","input-debounce":"0",label:"Selecione o veículo da viagem",options:e.options,behavior:"menu"},on:{filter:e.filterFn},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"local_shipping"}})]},proxy:!0},{key:"no-option",fn:function(){return[o("q-item",[o("q-item-section",{staticClass:"text-grey"},[[o("div",{staticClass:"q-pa-md q-gutter-sm"},[e._v("\n                        Não existe um veículo com este nome. Pode\n                        "),o("q-btn",{attrs:{to:"/veiculo/criar",type:"a",color:"primary",label:"Criar um novo"}})],1)]],2)],1)]},proxy:!0}],null,!1,3074290288),model:{value:e.freight_journey.truck_id,callback:function(t){e.$set(e.freight_journey,"truck_id",t)},expression:"freight_journey.truck_id"}})],1),o("div",{staticClass:"col-12 col-lg-6 q-mt-md"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-6 col-lg-4"},[o("q-toggle",{attrs:{label:"Preço negociável","left-label":""},model:{value:e.freight_journey.price_set,callback:function(t){e.$set(e.freight_journey,"price_set",t)},expression:"freight_journey.price_set"}})],1),o("div",{staticClass:"col-6 col-lg-8"},[o("q-input",{staticClass:"q-mr-lg",attrs:{filled:"",label:"Preço da viagem",type:"number",step:".01","lazy-rules":"",rules:[function(e){return e&&e>0||"Campo obrigatório"}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"monetization_on"}})]},proxy:!0}]),model:{value:e.freight_journey.price_negotiate,callback:function(t){e.$set(e.freight_journey,"price_negotiate",t)},expression:"freight_journey.price_negotiate"}})],1)])]),o("div",{staticClass:"col-12 col-lg-6 q-mt-md"},[o("q-input",{staticClass:"q-mr-lg",attrs:{filled:"",hint:"Se deixar em branco, os contactos da empresa serão usados",label:"Contacto na viagem","lazy-rules":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[o("q-icon",{attrs:{name:"phone"}})]},proxy:!0}]),model:{value:e.freight_journey.phone_journey,callback:function(t){e.$set(e.freight_journey,"phone_journey",t)},expression:"freight_journey.phone_journey"}})],1),o("div",{staticClass:"col-12 q-mt-lg"},[o("div",{staticClass:"text-h6"},[e._v("\n                Descreva a viagem (opcional)\n            ")]),o("q-editor",{attrs:{hint:"Descrição","min-height":"5rem"},model:{value:e.freight_journey.description,callback:function(t){e.$set(e.freight_journey,"description",t)},expression:"freight_journey.description"}})],1)]),o("div",[o("q-btn",{attrs:{label:e.editPage?"Actualizar":"Criar",type:"submit",color:"primary"}})],1)])],1)],1),[o("q-dialog",{model:{value:e.showDateTutorial,callback:function(t){e.showDateTutorial=t},expression:"showDateTutorial"}},[o("q-card",[o("q-card-section",[o("div",{staticClass:"text-h6"},[e._v("Como alterar a data?")])]),o("q-card-section",{staticClass:"q-pt-none"},[e._v("\n          Clique no símbolo "),o("span",{staticClass:"text-h5"},[o("q-icon",{attrs:{color:"primary",name:"event"}})],1),e._v("\n          e depois no símbolo "),o("span",{staticClass:"text-h5"},[o("q-icon",{attrs:{color:"primary",name:"access_time"}})],1)]),o("q-card-actions",{attrs:{align:"right"}},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK",color:"primary"}})],1)],1)],1)]],2)},r=[],i=o("0dce"),s=o("3a5e"),n=o("3fb9"),l={components:{HeaderFreightJourney:i["a"]},data(){return{dialogDate:!1,showDateTutorial:!1,freight_journey:{name:"",description:"",from_location:"",to_location:"",from_date:"",to_date:"",truck_id:"",price_set:!0,price_negotiate:"",phone_journey:"",status:"",id:"",from_date_date_part:"",from_date_hour_part:""},editPage:!1,trucks:[],options:[],file:null}},methods:{onSubmit(){s["a"].openNotify();let e=null;e=this.editPage?this.$axios.post("freight-journey/"+this.freight_journey.id,this.freight_journey):this.$axios.post("/freight-journey",this.freight_journey),e.then((e=>{s["a"].closeNotify(),s["a"].openSuccess(this.editPage?"Viagem actualizada com sucesso":"Viagem criada com sucesso",4e3),this.$router.push("/viagem")})).catch((e=>{n["a"].openNotify("Houve um erro durante a criação de viagem",5e3)}))},onRejectedfreight_journeyPic(){},filterFn(e,t){t(""!==e?()=>{const t=e.toLowerCase();this.options=[],this.trucks.filter((e=>e.name.toLowerCase().indexOf(t)>-1)).forEach((e=>{this.options.push(e.name)}))}:()=>{this.options=[],this.trucks.forEach((e=>{this.options.push(e.name)}))})}},beforeMount(){this.$axios.get("/vehicle").then((e=>{this.trucks=e.data}));let e=location.href;if(e.indexOf("edit")>=0){this.editPage=!0;let t=e.split("/"),o=t[t.length-1];this.$axios.get("freight-journey/"+o).then((e=>{this.freight_journey=e.data,this.freight_journey.price_set=1==this.freight_journey.price_set}))}}},c=l,u=o("2877"),d=o("f09f"),p=o("a370"),m=o("0378"),f=o("27f9"),h=o("0016"),_=o("7cbe"),g=o("52ee"),y=o("9c40"),v=o("ca78"),q=o("ddd8"),b=o("66e5"),j=o("4074"),C=o("9564"),x=o("d66b"),k=o("24e8"),w=o("4b7e"),$=o("7f67"),D=o("eebe"),S=o.n(D),Q=Object(u["a"])(c,a,r,!1,null,null,null);t["default"]=Q.exports;S()(Q,"components",{QCard:d["a"],QCardSection:p["a"],QForm:m["a"],QInput:f["a"],QIcon:h["a"],QPopupProxy:_["a"],QDate:g["a"],QBtn:y["a"],QTime:v["a"],QSelect:q["a"],QItem:b["a"],QItemSection:j["a"],QToggle:C["a"],QEditor:x["a"],QDialog:k["a"],QCardActions:w["a"]}),S()(Q,"directives",{ClosePopup:$["a"]})}}]);