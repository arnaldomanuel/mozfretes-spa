(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"3a5e":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},s=[],i=a("2a19");let l=null,r=null;var n={openNotify(){l=i["a"].create({color:"primary",spinner:!0,message:"Por favor aguarde...",timeout:0})},openSuccess(e){r=i["a"].create({color:"green",spinner:!1,message:e,timeout:3e3})},closeNotify(){l()},closeSuccess(){r()}},c=n,d=a("2877"),p=Object(d["a"])(c,o,s,!1,null,null,null);t["a"]=p.exports},"3fb9":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},s=[],i=a("2a19");let l=null;var r={openNotify(e,t=0){l=i["a"].create({type:"negative",message:e,timeout:t})},closeNotify(){l()}},n=r,c=a("2877"),d=Object(c["a"])(n,o,s,!1,null,null,null);t["a"]=d.exports},"49e2":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-card",{staticClass:"my-card"},[a("q-card-section",[a("div",{staticClass:"text-h5"},[e._v("Gestão de cargas")]),a("div",{staticClass:"text-subtitle2"},[e._v("Se possui alguma carga que precisa despachar, registe aqui")])]),a("q-card-section",{staticClass:"q-pt-none"},[[a("div",{},[a("q-btn",{staticClass:"q-mr-lg",attrs:{to:"/carga/criar",color:"secondary",label:"Criar",icon:"add"}}),a("q-btn",{staticClass:"q-mr-lg",attrs:{to:"/carga",color:"secondary",label:"Listar",icon:"visibility"}})],1)]],2)],1)],1)},s=[],i={},l=i,r=a("2877"),n=a("f09f"),c=a("a370"),d=a("9c40"),p=a("eebe"),u=a.n(p),m=Object(r["a"])(l,o,s,!1,null,null,null);t["a"]=m.exports;u()(m,"components",{QCard:n["a"],QCardSection:c["a"],QBtn:d["a"]})},"8cb9":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("header-freight-journey"),a("q-card",{staticClass:"my-card q-mt-md"},[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v(e._s(e.titlePage))])]),a("q-card-section",{staticClass:"q-pt-none"},[a("q-form",{ref:"myForm",staticClass:"q-gutter-md",on:{submit:e.onSubmit}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12  q-mt-md"},[a("q-file",{staticClass:"q-mr-lg",attrs:{accept:".jpeg, .png, .jpg",filled:"",hint:e.hintImage,label:"Carregue uma foto da carga","max-file-size":"1024000",name:"poster_file","use-chips":""},on:{rejected:e.onRejectedLoadPic},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"insert_photo"}})]},proxy:!0}]),model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-lg-6"},[a("q-input",{staticClass:"q-mr-lg",attrs:{rules:[function(e){return e&&e.length>0||"Campo obrigatório"}],filled:"",hint:"Seja específico e evite erros ortográficos",label:"Ponto de partida","lazy-rules":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"add_location"}})]},proxy:!0}]),model:{value:e.load.from_location,callback:function(t){e.$set(e.load,"from_location",t)},expression:"load.from_location"}})],1),a("div",{staticClass:"col-12 col-lg-6"},[a("q-input",{staticClass:"q-mr-lg",attrs:{rules:[function(e){return null!==e&&""!==e||"Campo obrigatório"}],filled:"",label:"Local de destino","lazy-rules":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"add_location"}})]},proxy:!0}]),model:{value:e.load.to_location,callback:function(t){e.$set(e.load,"to_location",t)},expression:"load.to_location"}})],1),a("div",{staticClass:"col-12 col-lg-6 q-mt-md"},[a("q-input",{staticClass:"q-mr-lg",attrs:{filled:"",hint:"Clique no ícone de calendário e depois no relógio",label:"Data de partida",readonly:""},on:{click:function(t){e.showDateTutorial=!0}},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{color:"primary",name:"event"}},[a("q-popup-proxy",{attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm"},model:{value:e.load.from_date,callback:function(t){e.$set(e.load,"from_date",t)},expression:"load.from_date"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",flat:"",label:"Fechar"}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{color:"primary",name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-time",{attrs:{format24h:"",mask:"YYYY-MM-DD HH:mm"},model:{value:e.load.from_date,callback:function(t){e.$set(e.load,"from_date",t)},expression:"load.from_date"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",flat:"",label:"Fechar"}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.load.from_date,callback:function(t){e.$set(e.load,"from_date",t)},expression:"load.from_date"}})],1),a("div",{staticClass:"col-12 col-lg-6 q-mt-md"},[a("q-input",{staticClass:"q-mr-lg",attrs:{filled:"",hint:"Clique no ícone de calendário e depois no relógio",label:"Data de destino",readonly:""},on:{click:function(t){e.showDateTutorial=!0}},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{color:"primary",name:"event"}},[a("q-popup-proxy",{attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm"},model:{value:e.load.to_date,callback:function(t){e.$set(e.load,"to_date",t)},expression:"load.to_date"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",flat:"",label:"Fechar"}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{color:"primary",name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-hide":"scale","transition-show":"scale"}},[a("q-time",{attrs:{format24h:"",mask:"YYYY-MM-DD HH:mm"},model:{value:e.load.to_date,callback:function(t){e.$set(e.load,"to_date",t)},expression:"load.to_date"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",flat:"",label:"Fechar"}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.load.to_date,callback:function(t){e.$set(e.load,"to_date",t)},expression:"load.to_date"}})],1),a("div",{staticClass:"col-12 col-lg-6 q-mt-md"},[a("q-input",{staticClass:"q-mr-lg",attrs:{rules:[function(e){return null!==e&&""!==e||"Campo obrigatório"},function(e){return e>0||"Peso deve possuir valor positivo"}],filled:"",label:"Capacidade máxima de carga em KG","lazy-rules":"",step:".01",type:"number"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"add_location"}})]},proxy:!0}]),model:{value:e.load.weight,callback:function(t){e.$set(e.load,"weight",t)},expression:"load.weight"}})],1),a("div",{staticClass:"col-12 col-lg-6 q-mt-md"},[a("q-input",{staticClass:"q-mr-lg",attrs:{filled:"",hint:"Se deixar em branco, os contactos da empresa serão usados",label:"Contacto na carga","lazy-rules":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"phone"}})]},proxy:!0}]),model:{value:e.load.phone_journey,callback:function(t){e.$set(e.load,"phone_journey",t)},expression:"load.phone_journey"}})],1)]),a("div",[a("q-btn",{attrs:{color:"primary",label:"Criar",type:"submit"}})],1)])],1)],1),[a("q-dialog",{model:{value:e.showDateTutorial,callback:function(t){e.showDateTutorial=t},expression:"showDateTutorial"}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Como alterar a data?")])]),a("q-card-section",{staticClass:"q-pt-none"},[e._v("\n          Clique no símbolo "),a("span",{staticClass:"text-h5"},[a("q-icon",{attrs:{color:"primary",name:"event"}})],1),e._v("\n          e depois no símbolo "),a("span",{staticClass:"text-h5"},[a("q-icon",{attrs:{color:"primary",name:"access_time"}})],1)]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",flat:"",label:"OK"}})],1)],1)],1)]],2)},s=[],i=a("49e2"),l=a("3a5e"),r=a("3fb9"),n={components:{HeaderFreightJourney:i["a"]},data(){return{editPage:!1,dialogDate:!1,showDateTutorial:!1,load:{name:"",description:"",from_location:"",to_location:"",from_date:null,to_date:null,phone_journey:"",status:"",id:"",weight:"",picture:null,from_date_date_part:"",from_date_hour_part:""},options:[],file:null}},methods:{onSubmit(){null!=this.load.from_date?null!=this.load.to_date?null!==this.$refs.myForm&&void 0!==this.$refs.myForm&&this.$refs.myForm.validate().then((e=>{l["a"].openNotify();let t=new FormData;t.append("load",JSON.stringify(this.load)),t.append("picture",this.file);let a=null;this.editPage?(this.file&&t.append("photo",this.file),a=this.$axios.post("load/"+this.load.id,t)):(t.append("photo",this.file),a=this.$axios.post("/load",t)),a.then((e=>{console.log(e),l["a"].closeNotify(),l["a"].openSuccess(this.successMessage),this.$router.push(this.editPage?"/carga/"+this.load.id:"/carga")})).catch((e=>{console.log(e),l["a"].closeNotify()}))})):r["a"].openNotify("Preencha a data de destino",5e3):r["a"].openNotify("Preencha a data de partida",5e3)},onRejectedLoadPic(){r["a"].openNotify("Imagem deve ter menos de 1MB")}},computed:{successMessage(){return this.editPage?"Carga editada com sucesso":"Carga criada com sucesso"},hintImage(){return this.editPage?"Se não quiser mudar a foto da carga, não carregue e nem mexa":""},titlePage(){return this.editPage?"Actualizar carga":"Adicionar carga"}},mounted(){let e=location.href;if(e.indexOf("edit")>=0){this.editPage=!0;let t=e.split("/"),a=t[t.length-1];this.$axios.get("load/"+a).then((e=>{this.load=e.data}))}}},c=n,d=a("2877"),p=a("f09f"),u=a("a370"),m=a("0378"),f=a("7d53"),h=a("0016"),g=a("27f9"),v=a("7cbe"),y=a("52ee"),q=a("9c40"),_=a("ca78"),b=a("24e8"),C=a("4b7e"),x=a("7f67"),w=a("eebe"),k=a.n(w),$=Object(d["a"])(c,o,s,!1,null,null,null);t["default"]=$.exports;k()($,"components",{QCard:p["a"],QCardSection:u["a"],QForm:m["a"],QFile:f["a"],QIcon:h["a"],QInput:g["a"],QPopupProxy:v["a"],QDate:y["a"],QBtn:q["a"],QTime:_["a"],QDialog:b["a"],QCardActions:C["a"]}),k()($,"directives",{ClosePopup:x["a"]})}}]);