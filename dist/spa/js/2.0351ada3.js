(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"1e9d":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("header-truck"),a("q-card",{staticClass:"my-card q-mt-md"},[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v(e._s(e.titlePage))])]),a("q-card-section",{staticClass:"q-pt-none"},[a("q-form",{ref:"myForm",staticClass:"q-gutter-md",on:{submit:e.onSubmit}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-lg-8"},[a("q-input",{staticClass:"q-mr-lg",attrs:{rules:[function(e){return e&&e.length>0||"Campo obrigatório"}],filled:"",hint:"Pode colocar a matrícula ou um nome que identifique o seu veículo",label:"Nome único do veículo","lazy-rules":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"local_shipping"}})]},proxy:!0}]),model:{value:e.truck.name,callback:function(t){e.$set(e.truck,"name",t)},expression:"truck.name"}})],1),a("div",{staticClass:"col-12 col-lg-4"},[a("q-input",{staticClass:"q-mr-lg",attrs:{rules:[function(e){return null!==e&&""!==e||"Campo obrigatório"},function(e){return e>0||"Peso deve possuir valor positivo"}],filled:"",label:"Capacidade máxima de carga em KG","lazy-rules":"",step:".01",type:"number"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"add_location"}})]},proxy:!0}]),model:{value:e.truck.maximum_capacity,callback:function(t){e.$set(e.truck,"maximum_capacity",t)},expression:"truck.maximum_capacity"}})],1),a("div",{staticClass:"col-12 col-lg-6  q-mt-md"},[a("q-input",{staticClass:"q-mr-lg",attrs:{rules:[function(e){return e&&e.length>0||"Campo obrigatório"}],filled:"",label:"Marca veículo","lazy-rules":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"dashboard"}})]},proxy:!0}]),model:{value:e.truck.brand,callback:function(t){e.$set(e.truck,"brand",t)},expression:"truck.brand"}})],1),a("div",{staticClass:"col-12 col-lg-6 q-mt-md"},[a("q-input",{staticClass:"q-mr-lg",attrs:{rules:[function(e){return e&&e.length>0||"Campo obrigatório"}],filled:"",label:"Modelo do veículo","lazy-rules":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"layers"}})]},proxy:!0}]),model:{value:e.truck.model,callback:function(t){e.$set(e.truck,"model",t)},expression:"truck.model"}})],1),a("div",{staticClass:"col-12"},[a("q-file",{attrs:{accept:".jpeg, .png, .jpg",filled:"",label:"Carregue a foto do veículo","max-file-size":"1024000",name:"poster_file",hint:e.hintImage,"use-chips":""},on:{rejected:e.onRejectedTruckPic},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"image"}})]},proxy:!0}]),model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1)]),a("div",[a("q-btn",{attrs:{color:"primary",label:"Criar",type:"submit"}})],1)])],1)],1)],1)},i=[],s=a("6693"),l=a("3a5e"),c=a("3fb9"),n={components:{HeaderTruck:s["a"]},data(){return{truck:{name:"",brand:"",model:"",maximum_capacity:"",photo_path:""},file:null,editPage:!1}},computed:{successMessage(){return this.editPage?"Veículo editado com sucesso":"Veículo criado com sucesso"},hintImage(){return this.editPage?"Se não quiser mudar a foto do veículo, não carregue e nem mexa":""},titlePage(){return this.editPage?"Actualizar veículo":"Adicionar Veículo"}},methods:{onSubmit(){null!==this.$refs.myForm&&void 0!==this.$refs.myForm&&this.$refs.myForm.validate().then((e=>{l["a"].openNotify();let t=new FormData;console.log(this.file),t.append("name",this.truck.name),t.append("model",this.truck.model),t.append("brand",this.truck.brand),t.append("maximum_capacity",this.truck.maximum_capacity);let a=null;this.editPage?(this.file&&t.append("photo",this.file),console.log("edir",t.get("name")),a=this.$axios.post("vehicle/"+this.truck.id,t)):(t.append("photo",this.file),a=this.$axios.post("/vehicle",t)),a.then((e=>{console.log(e),l["a"].closeNotify(),l["a"].openSuccess(this.successMessage),this.$router.push(this.editPage?"/veiculo/"+this.truck.id:"/veiculo")})).catch((e=>{console.log(e),l["a"].closeNotify()}))}))},onRejectedTruckPic(){c["a"].openNotify("Imagem deve ter menos de 1MB",4e3)}},mounted(){let e=location.href;if(e.indexOf("edit")>=0){this.editPage=!0;let t=e.split("/"),a=t[t.length-1];this.$axios.get("vehicle/"+a).then((e=>{this.truck=e.data}))}}},r=n,u=a("2877"),d=a("f09f"),m=a("a370"),p=a("0378"),f=a("27f9"),h=a("0016"),v=a("7d53"),g=a("9c40"),b=a("eebe"),y=a.n(b),k=Object(u["a"])(r,o,i,!1,null,null,null);t["default"]=k.exports;y()(k,"components",{QCard:d["a"],QCardSection:m["a"],QForm:p["a"],QInput:f["a"],QIcon:h["a"],QFile:v["a"],QBtn:g["a"]})},"3a5e":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},i=[],s=a("2a19");let l=null,c=null;var n={openNotify(){l=s["a"].create({color:"primary",spinner:!0,message:"Por favor aguarde...",timeout:0})},openSuccess(e){c=s["a"].create({color:"green",spinner:!1,message:e,timeout:3e3})},closeNotify(){l()},closeSuccess(){c()}},r=n,u=a("2877"),d=Object(u["a"])(r,o,i,!1,null,null,null);t["a"]=d.exports},"3fb9":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},i=[],s=a("2a19");let l=null;var c={openNotify(e,t=0){l=s["a"].create({type:"negative",message:e,timeout:t})},closeNotify(){l()}},n=c,r=a("2877"),u=Object(r["a"])(n,o,i,!1,null,null,null);t["a"]=u.exports},6693:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-card",{staticClass:"my-card"},[a("q-card-section",[a("div",{staticClass:"text-h5"},[e._v("Gestão de veículos")]),a("div",{staticClass:"text-subtitle2"},[e._v("Registe, edite e elimine veículos que sua empresa possui")])]),a("q-card-section",{staticClass:"q-pt-none"},[[a("div",{},[a("q-btn",{staticClass:"q-mr-lg",attrs:{to:"/veiculo/criar",color:"secondary",label:"Criar",icon:"add"}}),a("q-btn",{staticClass:"q-mr-lg",attrs:{to:"/veiculo",color:"secondary",label:"Listar",icon:"visibility"}})],1)]],2)],1)],1)},i=[],s={},l=s,c=a("2877"),n=a("f09f"),r=a("a370"),u=a("9c40"),d=a("eebe"),m=a.n(d),p=Object(c["a"])(l,o,i,!1,null,null,null);t["a"]=p.exports;m()(p,"components",{QCard:n["a"],QCardSection:r["a"],QBtn:u["a"]})}}]);