(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"49e2":function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("q-card",{staticClass:"my-card"},[e("q-card-section",[e("div",{staticClass:"text-h5"},[t._v("Gestão de cargas")]),e("div",{staticClass:"text-subtitle2"},[t._v("Se possui alguma carga que precisa despachar, registe aqui")])]),e("q-card-section",{staticClass:"q-pt-none"},[[e("div",{},[e("q-btn",{staticClass:"q-mr-lg",attrs:{to:"/carga/criar",color:"secondary",label:"Criar",icon:"add"}}),e("q-btn",{staticClass:"q-mr-lg",attrs:{to:"/carga",color:"secondary",label:"Listar",icon:"visibility"}})],1)]],2)],1)],1)},o=[],s={},n=s,r=e("2877"),l=e("f09f"),c=e("a370"),d=e("9c40"),u=e("eebe"),g=e.n(u),p=Object(r["a"])(n,i,o,!1,null,null,null);a["a"]=p.exports;g()(p,"components",{QCard:l["a"],QCardSection:c["a"],QBtn:d["a"]})},"6fe2":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("header-freight-journey"),e("div",{staticClass:"q-pt-md"},[[e("div",{staticClass:"q-mt-md"},[e("q-table",{attrs:{title:"Cargas",loading:t.loading,pagination:t.pagination,"binary-state-sort":"",columns:t.columns,data:t.rows,filter:t.filter,"row-key":"id"},on:{"row-click":t.goTo,"update:pagination":function(a){t.pagination=a},request:t.onRequest},scopedSlots:t._u([{key:"top-right",fn:function(){return[e("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Pesquise"},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(a){t.filter=a},expression:"filter"}})]},proxy:!0}])})],1)]],2)],1)},o=[],s=(e("ddb0"),e("49e2")),n=(e("db25"),{components:{HeaderFreightJourney:s["a"]},data(){return{pagination:{sortBy:"id",descending:!1,page:1,rowsPerPage:3,rowsNumber:10},filter:"",columns:[{name:"id",required:!0,label:"id",align:"left",field:t=>t.id,format:t=>`${t}`,sortable:!0},{name:"from_location",required:!0,label:"Partida",align:"left",field:t=>t.from_location,format:t=>`${t}`,sortable:!0},{name:"weight",align:"left",label:"Peso estimado (Kg)",field:"weight",sortable:!0},{name:"to_location",align:"left",label:"Destino",field:"to_location",sortable:!0},{name:"from_date",align:"left",label:"Data Saída",field:"from_date",sortable:!0}],loading:!1,data:[],rows:[],status:""}},methods:{goTo(t,a,e){console.log(a),this.$router.push("carga/"+a.id)},async getRowsNumberCount(t){let a=0;return await this.$axios.get("load/search/count?filter="+t).then((t=>{a=t.data,a=parseInt(a)})),a},async fetchFromServer(t,a,e,i,o){let s=[];return await this.$axios.get(`/load/global/search?filter=${e}&startRow=${t}&fetchCount=${a}&sortBy=${i}&descending=${o}&status=${this.status}`).then((t=>{s=t.data})),s},async onRequest(t){console.log("props",t);const{page:a,rowsPerPage:e,sortBy:i,descending:o}=t?t.pagination:this.pagination,s=this.filter;this.loading=!0,this.pagination.rowsNumber=await this.getRowsNumberCount(s);const n=0===e?this.pagination.rowsNumber:e,r=(a-1)*e,l=await this.fetchFromServer(r,n,s,i,o);this.rows.splice(0,this.rows.length,...l),console.log("rows ",this.rows),this.pagination.page=a,this.pagination.rowsPerPage=e,this.pagination.sortBy=i,this.pagination.descending=o,console.log("pagination",this.pagination),this.loading=!1}},async beforeMount(){let t=await this.getRowsNumberCount("");this.pagination.rowsNumber=t,this.onRequest()}}),r=n,l=e("2877"),c=e("eaac"),d=e("27f9"),u=e("0016"),g=e("eebe"),p=e.n(g),f=Object(l["a"])(r,i,o,!1,null,null,null);a["default"]=f.exports;p()(f,"components",{QTable:c["a"],QInput:d["a"],QIcon:u["a"]})}}]);